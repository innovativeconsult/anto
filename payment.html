<!DOCTYPE html>
<html>

<head>
  <title>Pay ₹99</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <style>
    * {
      padding: 0px;
      margin: 0px;
    }

    .overall {
      width: 100%;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      background: linear-gradient(90deg, #8772d5, #8978d4, #8b7ed4, #8c84d3, #8e8ad3, #908fd2, #9295d1, #939bd1, #95a1d0);

    }

    .contain {
      height: 80vh;
      width: 80vw;
      border: 1px solid white;
      box-shadow: -10px 10px 20px rgba(0, 0, 0, 0.4);
      display: flex;
      gap: 40px;

      justify-content: center;
      align-items: center;
      background: linear-gradient(90deg, #5e41c8, #6a52cd, #7562d3, #8173d8, #8c83de, #9894e3, #a3a4e8, #afb5ee, #bac5f3);
    }

    .left {
      width: 70%;
      height: 100%;
      background-image: url("asset/pay-4.png");
      background-size: cover;
      background-repeat: no-repeat;
    }

    .right {
      width: 30%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 40px;
    }

    button {
      /* background-color: rgb(237, 69, 9); */
      /* background-color: rgb(76, 206, 76); */
      background-color: rgb(72, 161, 255);
      color: rgba(0, 0, 0, 0.7);

      border-radius: 5px;
      width: 180px;
      padding: 10px;
      font-size: 18px;
      font-weight: 600;
      border: none;
      transition: all .4s ease;
      box-shadow: 5px 5px 5px;
    }

    button:hover {
      scale: 1.1;
      box-shadow: 5px 5px 5px;
    }

    h2 {
      font-size: 40px;
    }

    img {
      height: 400px;
      width: 400px;

    }

    h2::first-letter {
      font-size: 2em;
      font-weight: bold;
      /* float: left; */
      line-height: 1;
      padding-right: 4px;

      font-family: Georgia, serif;
    }

    @media screen and (min-width: 900px) and (max-width: 1060px) {
     h2{
      font-size: 30px;
     }

    }
    @media screen and (min-width:600px) and (max-width:900px){
      .contain{
        gap: 0px;
        flex-direction: column-reverse;
        
      }
      .left{
        height: 60%;
        width: 100%;
       
      }
      .right{
        height: 40%;
        width: 90%;
         gap: 15px;
       
      }
      
    }
      @media screen and (min-width:300px) and (max-width:600px){
      .contain{
        gap: 0px;
        flex-direction: column-reverse;
        
      }
      .left{
        height: 65%;
        width: 100%;
        background-image: url("asset/pay-3.png");
        background-position: 0% 30%;
       
      }
      .right{
        height: 35%;
        width: 90%;
         gap: 15px;
       
      }
      
    }
  </style>
</head>

<body>
  <div class="overall">
    <div class="contain">
      <div class="right">
        <h2>Click to Pay</h2>
        <button id="pay-btn">Pay ₹99</button>
      </div>
      <div class="left">

      </div>

    </div>
  </div>

  <script>
    const email = localStorage.getItem("clientEmail"); // Set this in form before

    if (!email) {
      alert("Email not found. Please submit the form first.");
      window.location.href = "index.html";
    }

    const amount = 99;
    const API_LINK='https://appsail-50030077741.development.catalystappsail.in'
    document.getElementById("pay-btn").onclick = async () => {
      const orderResponse = await fetch(`${API_LINK}/create-order`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ amount })
      });
    

      const orderData = await orderResponse.json();

      const options = {
        key: "rzp_live_gfoS1OjC8tvWjP", // ✅ Public Key Only
        amount: orderData.amount,
        currency: "INR",
        order_id: orderData.id,
        name: "Training",
        description: "Payment",
        prefill: {
          email: email
        },
        handler: function (response) {
          fetch(`${API_LINK}/payment-success`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              email,
              amount,
              payment_id: response.razorpay_payment_id
            })
          })
            .then(res => res.json())
            .then(data => {
              window.location.href = "result.html";
            });
        }
      };

      const rzp = new Razorpay(options);
      rzp.open();
    };
  </script>
</body>

</html>